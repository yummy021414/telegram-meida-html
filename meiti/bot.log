2025-11-04 22:33:31,046 - __main__ - INFO - Token Â∑≤ËÆæÁΩÆ: 8266393613:AAHiIlCxq...
2025-11-04 22:33:31,343 - __main__ - INFO - ÂºÄÂßãËøêË°å Bot...
2025-11-04 22:33:31,344 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:33:31,345 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:33:31,487 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:33:31,487 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:33:31,631 - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-04 22:33:31,632 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x00000190F3D76840>
2025-11-04 22:33:31,632 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x00000190F3D76840> completed
2025-11-04 22:33:31,632 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", [])
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", []) completed
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', [])
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', []) completed
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', [])
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', []) completed
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', [])
2025-11-04 22:33:31,633 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', []) completed
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', [])
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', []) completed
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', [])
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', []) completed
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', [])
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x00000190F3CCA5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', []) completed
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000190F3CCA5C0>)
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000190F3CCA5C0>) completed
2025-11-04 22:33:31,634 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000190F3CCA5C0>)
2025-11-04 22:33:31,635 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000190F3CCA5C0>) completed
2025-11-04 22:33:31,635 - bot - INFO - Database initialized
2025-11-04 22:33:31,635 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-04 22:33:31,636 - bot - INFO - Bot starting...
2025-11-04 22:33:31,636 - __main__ - ERROR - ÂêØÂä®Â§±Ë¥•: There is no current event loop in thread 'MainThread'.
Traceback (most recent call last):
  File "C:\Users\x\Desktop\backpack\meiti\run_bot_debug.py", line 65, in <module>
    bot.main()
  File "C:\Users\x\Desktop\backpack\meiti\bot.py", line 500, in main
    application.run_polling(allowed_updates=Update.ALL_TYPES)
  File "C:\Users\x\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_application.py", line 818, in run_polling
    return self.__run(
           ^^^^^^^^^^^
  File "C:\Users\x\AppData\Local\Programs\Python\Python311\Lib\site-packages\telegram\ext\_application.py", line 977, in __run
    loop = asyncio.get_event_loop()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\x\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 681, in get_event_loop
    raise RuntimeError('There is no current event loop in thread %r.'
RuntimeError: There is no current event loop in thread 'MainThread'.
2025-11-04 22:33:52,416 - __main__ - INFO - Token Â∑≤ËÆæÁΩÆ: 8266393613:AAHiIlCxq...
2025-11-04 22:33:52,718 - __main__ - INFO - ÂºÄÂßãËøêË°å Bot...
2025-11-04 22:33:52,719 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:33:52,720 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:33:52,863 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:33:52,864 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:33:53,010 - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-04 22:33:53,011 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x0000027BFD1B67A0>
2025-11-04 22:33:53,011 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x0000027BFD1B67A0> completed
2025-11-04 22:33:53,011 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", [])
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", []) completed
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', [])
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', []) completed
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', [])
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', []) completed
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', [])
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', []) completed
2025-11-04 22:33:53,012 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', [])
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', []) completed
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', [])
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', []) completed
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', [])
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x0000027BFD10A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', []) completed
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027BFD10A5C0>)
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027BFD10A5C0>) completed
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027BFD10A5C0>)
2025-11-04 22:33:53,013 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027BFD10A5C0>) completed
2025-11-04 22:33:53,013 - bot - INFO - Database initialized
2025-11-04 22:33:53,014 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-04 22:33:53,014 - bot - INFO - Bot starting...
2025-11-04 22:33:53,014 - __main__ - ERROR - ÂêØÂä®Â§±Ë¥•: cannot access local variable 'sys' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\x\Desktop\backpack\meiti\run_bot_debug.py", line 65, in <module>
    bot.main()
  File "C:\Users\x\Desktop\backpack\meiti\bot.py", line 506, in main
    if sys.platform == 'win32':
       ^^^
UnboundLocalError: cannot access local variable 'sys' where it is not associated with a value
2025-11-04 22:34:13,228 - __main__ - INFO - Token Â∑≤ËÆæÁΩÆ: 8266393613:AAHiIlCxq...
2025-11-04 22:34:13,527 - __main__ - INFO - ÂºÄÂßãËøêË°å Bot...
2025-11-04 22:34:13,529 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:34:13,530 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:34:13,673 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:34:13,673 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:34:13,818 - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-04 22:34:13,818 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001B56B8E6840>
2025-11-04 22:34:13,819 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001B56B8E6840> completed
2025-11-04 22:34:13,819 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", [])
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", []) completed
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', [])
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', []) completed
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', [])
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', []) completed
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', [])
2025-11-04 22:34:13,820 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', []) completed
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', [])
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', []) completed
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', [])
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', []) completed
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', [])
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001B56B83A5C0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', []) completed
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B56B83A5C0>)
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B56B83A5C0>) completed
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B56B83A5C0>)
2025-11-04 22:34:13,821 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B56B83A5C0>) completed
2025-11-04 22:34:13,821 - bot - INFO - Database initialized
2025-11-04 22:34:13,822 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-04 22:34:13,822 - bot - INFO - Bot starting...
2025-11-04 22:34:13,822 - asyncio - DEBUG - Using selector: SelectSelector
2025-11-04 22:34:13,830 - telegram.ext.ExtBot - DEBUG - Entering: get_me
2025-11-04 22:34:13,833 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-11-04 22:34:14,055 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B56B6E85D0>
2025-11-04 22:34:14,055 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B56B777B60> server_hostname='api.telegram.org' timeout=5.0
2025-11-04 22:34:15,053 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B56B6E9D90>
2025-11-04 22:34:15,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:15,053 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:15,053 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:15,053 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:15,053 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:15,713 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'262'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:15,713 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/getMe "HTTP/1.1 200 OK"
2025-11-04 22:34:15,713 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:15,713 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:15,714 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:15,714 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:15,714 - telegram.ext.ExtBot - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='Èõ∑Èîãbot', id=8266393613, is_bot=True, supports_inline_queries=False, username='woshileifengmabot')
2025-11-04 22:34:15,714 - telegram.ext.ExtBot - DEBUG - Exiting: get_me
2025-11-04 22:34:15,714 - telegram.ext.ExtBot - DEBUG - This Bot is already initialized.
2025-11-04 22:34:15,714 - telegram.ext.Updater - DEBUG - Updater started (polling)
2025-11-04 22:34:15,714 - telegram.ext.Updater - DEBUG - Start network loop retry bootstrap del webhook
2025-11-04 22:34:15,714 - telegram.ext.Updater - DEBUG - Deleting webhook
2025-11-04 22:34:15,714 - telegram.ext.ExtBot - DEBUG - Entering: delete_webhook
2025-11-04 22:34:15,714 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:15,715 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:15,715 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:15,715 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:15,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:16,071 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'68'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:16,071 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/deleteWebhook "HTTP/1.1 200 OK"
2025-11-04 22:34:16,071 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:16,071 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:16,071 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:16,072 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:16,072 - telegram.ext.ExtBot - DEBUG - True
2025-11-04 22:34:16,072 - telegram.ext.ExtBot - DEBUG - Exiting: delete_webhook
2025-11-04 22:34:16,072 - telegram.ext.Updater - DEBUG - Bootstrap done
2025-11-04 22:34:16,072 - telegram.ext.Updater - DEBUG - Waiting for polling to start
2025-11-04 22:34:16,072 - telegram.ext.Updater - DEBUG - Polling updates from Telegram started
2025-11-04 22:34:16,072 - telegram.ext.Updater - DEBUG - Start network loop retry getting Updates
2025-11-04 22:34:16,072 - telegram.ext.ExtBot - DEBUG - Entering: get_updates
2025-11-04 22:34:16,072 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-11-04 22:34:16,072 - apscheduler.scheduler - INFO - Added job "cleanup_wrapper" to job store "default"
2025-11-04 22:34:16,073 - apscheduler.scheduler - INFO - Scheduler started
2025-11-04 22:34:16,073 - telegram.ext.Application - DEBUG - JobQueue started
2025-11-04 22:34:16,073 - telegram.ext.Application - INFO - Application started
2025-11-04 22:34:16,073 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-11-04 22:34:16,073 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-11-04 15:34:13.822247+00:00 (in 3597.748551 seconds)
2025-11-04 22:34:16,074 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B56B960B10>
2025-11-04 22:34:16,074 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x000001B56B80F0B0> server_hostname='api.telegram.org' timeout=5.0
2025-11-04 22:34:17,078 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001B56B8F57D0>
2025-11-04 22:34:17,078 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,078 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:17,078 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,078 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:17,078 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,430 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'2026'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:17,430 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/getUpdates "HTTP/1.1 200 OK"
2025-11-04 22:34:17,431 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,431 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:17,431 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:17,431 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:17,431 - telegram.ext.ExtBot - DEBUG - Getting updates: [928951880, 928951881, 928951882, 928951883]
2025-11-04 22:34:17,431 - telegram.ext.ExtBot - DEBUG - (Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 31, 55, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=10, supergroup_chat_created=False, text='/start'), update_id=928951880), Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 12, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=11, supergroup_chat_created=False, text='/start'), update_id=928951881), Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 29, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=12, supergroup_chat_created=False, text='/start'), update_id=928951882), Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 32, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=13, supergroup_chat_created=False, text='/start'), update_id=928951883))
2025-11-04 22:34:17,432 - telegram.ext.ExtBot - DEBUG - Exiting: get_updates
2025-11-04 22:34:17,432 - telegram.ext.ExtBot - DEBUG - Entering: get_updates
2025-11-04 22:34:17,432 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 31, 55, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=10, supergroup_chat_created=False, text='/start'), update_id=928951880)
2025-11-04 22:34:17,433 - telegram.ext.ExtBot - DEBUG - Entering: send_message
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:17,433 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,434 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:17,434 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,869 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:17 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'636'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:17,869 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/sendMessage "HTTP/1.1 200 OK"
2025-11-04 22:34:17,869 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,870 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:17,870 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:17,870 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:17,870 - telegram.ext.ExtBot - DEBUG - Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 34, 17, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='Èõ∑Èîãbot', id=8266393613, is_bot=True, username='woshileifengmabot'), group_chat_created=False, message_id=14, supergroup_chat_created=False, text='üëã Ê¨¢Ëøé‰ΩøÁî®Â™í‰ΩìÂàÜ‰∫´BotÔºÅ\n\nüì∏ ÂàõÂª∫Êñ∞Áõ∏ÂÜå - ÂºÄÂßãÊî∂ÈõÜÂ™í‰Ωì\nüìä ÊàëÁöÑÁõ∏ÂÜå - Êü•ÁúãÂ∑≤ÂàõÂª∫ÁöÑÁõ∏ÂÜå\n‚ÑπÔ∏è Â∏ÆÂä© - Êü•Áúã‰ΩøÁî®ËØ¥Êòé')
2025-11-04 22:34:17,870 - telegram.ext.ExtBot - DEBUG - Exiting: send_message
2025-11-04 22:34:17,871 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 12, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=11, supergroup_chat_created=False, text='/start'), update_id=928951881)
2025-11-04 22:34:17,871 - telegram.ext.ExtBot - DEBUG - Entering: send_message
2025-11-04 22:34:17,871 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:17,872 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:17,872 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:17,872 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:17,872 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:18,352 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'636'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:18,353 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/sendMessage "HTTP/1.1 200 OK"
2025-11-04 22:34:18,353 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:18,353 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:18,353 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:18,353 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:18,353 - telegram.ext.ExtBot - DEBUG - Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 34, 18, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='Èõ∑Èîãbot', id=8266393613, is_bot=True, username='woshileifengmabot'), group_chat_created=False, message_id=15, supergroup_chat_created=False, text='üëã Ê¨¢Ëøé‰ΩøÁî®Â™í‰ΩìÂàÜ‰∫´BotÔºÅ\n\nüì∏ ÂàõÂª∫Êñ∞Áõ∏ÂÜå - ÂºÄÂßãÊî∂ÈõÜÂ™í‰Ωì\nüìä ÊàëÁöÑÁõ∏ÂÜå - Êü•ÁúãÂ∑≤ÂàõÂª∫ÁöÑÁõ∏ÂÜå\n‚ÑπÔ∏è Â∏ÆÂä© - Êü•Áúã‰ΩøÁî®ËØ¥Êòé')
2025-11-04 22:34:18,353 - telegram.ext.ExtBot - DEBUG - Exiting: send_message
2025-11-04 22:34:18,353 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 29, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=12, supergroup_chat_created=False, text='/start'), update_id=928951882)
2025-11-04 22:34:18,353 - telegram.ext.ExtBot - DEBUG - Entering: send_message
2025-11-04 22:34:18,354 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:18,354 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:18,354 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:18,354 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:18,354 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:18,745 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'636'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:18,745 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/sendMessage "HTTP/1.1 200 OK"
2025-11-04 22:34:18,746 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:18,746 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:18,746 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:18,746 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:18,746 - telegram.ext.ExtBot - DEBUG - Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 34, 18, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='Èõ∑Èîãbot', id=8266393613, is_bot=True, username='woshileifengmabot'), group_chat_created=False, message_id=16, supergroup_chat_created=False, text='üëã Ê¨¢Ëøé‰ΩøÁî®Â™í‰ΩìÂàÜ‰∫´BotÔºÅ\n\nüì∏ ÂàõÂª∫Êñ∞Áõ∏ÂÜå - ÂºÄÂßãÊî∂ÈõÜÂ™í‰Ωì\nüìä ÊàëÁöÑÁõ∏ÂÜå - Êü•ÁúãÂ∑≤ÂàõÂª∫ÁöÑÁõ∏ÂÜå\n‚ÑπÔ∏è Â∏ÆÂä© - Êü•Áúã‰ΩøÁî®ËØ¥Êòé')
2025-11-04 22:34:18,746 - telegram.ext.ExtBot - DEBUG - Exiting: send_message
2025-11-04 22:34:18,746 - telegram.ext.Application - DEBUG - Processing update Update(message=Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 32, 32, tzinfo=<UTC>), delete_chat_photo=False, entities=(MessageEntity(length=6, offset=0, type=<MessageEntityType.BOT_COMMAND>),), from_user=User(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, is_bot=False, is_premium=True, language_code='zh-hans', username='yummy88888'), group_chat_created=False, message_id=13, supergroup_chat_created=False, text='/start'), update_id=928951883)
2025-11-04 22:34:18,746 - telegram.ext.ExtBot - DEBUG - Entering: send_message
2025-11-04 22:34:18,747 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-04 22:34:18,747 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-04 22:34:18,747 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-04 22:34:18,747 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-04 22:34:18,747 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-04 22:34:19,176 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Tue, 04 Nov 2025 14:34:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'636'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-11-04 22:34:19,176 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8266393613:AAHiIlCxq17OoLaSgcfSjNvh350pP4e8NKk/sendMessage "HTTP/1.1 200 OK"
2025-11-04 22:34:19,176 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-04 22:34:19,176 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-04 22:34:19,176 - httpcore.http11 - DEBUG - response_closed.started
2025-11-04 22:34:19,176 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-04 22:34:19,176 - telegram.ext.ExtBot - DEBUG - Message(channel_chat_created=False, chat=Chat(first_name='Â¶ÑÂ∑ùÔºà‰ºòÂÖàËÅîÁ≥ªËµÑÊñô+ÂèåÂêëbotÔºâ', id=710485715, type=<ChatType.PRIVATE>, username='yummy88888'), date=datetime.datetime(2025, 11, 4, 14, 34, 18, tzinfo=<UTC>), delete_chat_photo=False, from_user=User(first_name='Èõ∑Èîãbot', id=8266393613, is_bot=True, username='woshileifengmabot'), group_chat_created=False, message_id=17, supergroup_chat_created=False, text='üëã Ê¨¢Ëøé‰ΩøÁî®Â™í‰ΩìÂàÜ‰∫´BotÔºÅ\n\nüì∏ ÂàõÂª∫Êñ∞Áõ∏ÂÜå - ÂºÄÂßãÊî∂ÈõÜÂ™í‰Ωì\nüìä ÊàëÁöÑÁõ∏ÂÜå - Êü•ÁúãÂ∑≤ÂàõÂª∫ÁöÑÁõ∏ÂÜå\n‚ÑπÔ∏è Â∏ÆÂä© - Êü•Áúã‰ΩøÁî®ËØ¥Êòé')
2025-11-04 22:34:19,177 - telegram.ext.ExtBot - DEBUG - Exiting: send_message
2025-11-04 22:34:31,469 - run_bot_debug - INFO - Token Â∑≤ËÆæÁΩÆ: 8266393613:AAHiIlCxq...
2025-11-04 22:34:31,756 - run_bot_debug - INFO - ÂºÄÂßãËøêË°å Bot...
2025-11-04 22:34:31,758 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:34:31,759 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:34:31,901 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-11-04 22:34:31,902 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\x\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\certifi\\cacert.pem'
2025-11-04 22:34:32,045 - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-04 22:34:32,046 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x000001FEE81D2DE0>
2025-11-04 22:34:32,046 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x000001FEE81D2DE0> completed
2025-11-04 22:34:32,046 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", [])
2025-11-04 22:34:32,046 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, "\n                CREATE TABLE IF NOT EXISTS albums (\n                    album_id TEXT PRIMARY KEY,\n                    user_id INTEGER NOT NULL,\n                    album_name TEXT NOT NULL,\n                    status TEXT NOT NULL DEFAULT 'creating',\n                    created_at TIMESTAMP NOT NULL,\n                    completed_at TIMESTAMP,\n                    expire_at TIMESTAMP NOT NULL,\n                    url_path TEXT\n                )\n            ", []) completed
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', [])
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, '\n                CREATE TABLE IF NOT EXISTS media_groups (\n                    group_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    album_id TEXT NOT NULL,\n                    group_number INTEGER NOT NULL,\n                    media_count INTEGER NOT NULL DEFAULT 0,\n                    photo_count INTEGER NOT NULL DEFAULT 0,\n                    video_count INTEGER NOT NULL DEFAULT 0,\n                    text_content TEXT,\n                    collected_at TIMESTAMP NOT NULL,\n                    FOREIGN KEY (album_id) REFERENCES albums(album_id)\n                )\n            ', []) completed
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', [])
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, '\n                CREATE TABLE IF NOT EXISTS media_files (\n                    media_id INTEGER PRIMARY KEY AUTOINCREMENT,\n                    group_id INTEGER NOT NULL,\n                    file_id TEXT NOT NULL,\n                    file_type TEXT NOT NULL,\n                    sequence INTEGER NOT NULL,\n                    caption TEXT,\n                    timestamp TIMESTAMP NOT NULL,\n                    FOREIGN KEY (group_id) REFERENCES media_groups(group_id)\n                )\n            ', []) completed
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', [])
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_user ON albums(user_id)', []) completed
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', [])
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_status ON albums(status)', []) completed
2025-11-04 22:34:32,047 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', [])
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_media_group ON media_files(group_id)', []) completed
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', [])
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Connection object at 0x000001FEE81266B0>, 'CREATE INDEX IF NOT EXISTS idx_album_expire ON albums(expire_at)', []) completed
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FEE81266B0>)
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001FEE81266B0>) completed
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001FEE81266B0>)
2025-11-04 22:34:32,048 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001FEE81266B0>) completed
2025-11-04 22:34:32,048 - bot - INFO - Database initialized
